# BlackBox GPT / AIMedChatBot

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π Telegram‚Äë–±–æ—Ç –Ω–∞ –±–∞–∑–µ `aiogram 3` —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π DeepSeek API,
—Ä–µ–∂–∏–º–∞–º–∏ —Ä–∞–±–æ—Ç—ã, –ª–∏–º–∏—Ç–∞–º–∏ –ø–æ –ø–æ–¥–ø–∏—Å–∫–µ –∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π.

## –°—Ç–µ–∫

- Python 3.10+
- aiogram 3
- DeepSeek API (`/chat/completions`)
- SQLAlchemy 2 (async) + SQLite / Postgres
- pydantic-settings –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

1. –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π–¥–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞.
2. –°–æ–∑–¥–∞–π –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:

   ```bash
   python -m venv venv
   source venv/bin/activate  # Windows: venv\Scripts\activate
   ```

3. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

   ```bash
   pip install -r requirements.txt
   ```

4. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª `.env` –ø–æ –æ–±—Ä–∞–∑—Ü—É `.env.example` –∏ –∑–∞–ø–æ–ª–Ω–∏:

   - `BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather
   - `BOT_USERNAME` ‚Äî username –±–æ—Ç–∞ –±–µ–∑ @
   - `DEEPSEEK_API_KEY` ‚Äî –∫–ª—é—á DeepSeek
   - –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–π `DB_URL`

5. –ó–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞:

   ```bash
   python -m bot.main
   ```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–¥—É—Ç—Å—è —Ç–∞–±–ª–∏—Ü—ã –ë–î.

## –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞

- `/start` ‚Äî –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ + —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ deep‚Äëlink `?start=ref_xxx`
- –ù–∏–∂–Ω–∏–π —Ç–∞—Å–∫–±–∞—Ä (inline‚Äë–∫–Ω–æ–ø–∫–∏):
  - üß† –†–µ–∂–∏–º—ã ‚Äî –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ LLM (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π / –º–µ–¥–∏—Ü–∏–Ω–∞ / –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫ / –±–∏–∑–Ω–µ—Å / –∫—Ä–µ–∞—Ç–∏–≤)
  - üë§ –ü—Ä–æ—Ñ–∏–ª—å ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ, –ª–∏–º–∏—Ç–∞—Ö, —Ä–µ—Ñ–µ—Ä–∞–ª–∞—Ö –∏ —Å—Å—ã–ª–∫–∞
  - üíé –ü–æ–¥–ø–∏—Å–∫–∞ ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–æ–≤ –∏ –∑–∞–≥–ª—É—à–∫–∞ –ø–æ–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –æ–ø–ª–∞—Ç—ã
  - üë• –†–µ—Ñ–µ—Ä–∞–ª—ã ‚Äî —Å—á—ë—Ç—á–∏–∫ –∏ —Å—Å—ã–ª–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è

- –í—Å–µ –æ–±—ã—á–Ω—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–Ω–µ –∫–æ–º–∞–Ω–¥—ã) ‚Üí –∑–∞–ø—Ä–æ—Å –∫ DeepSeek —Å —É—á—ë—Ç–æ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ
  —Ä–µ–∂–∏–º–∞ –∏ –∫—É—Å–æ—á–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è).

- –î–Ω–µ–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã –∑–∞–≤—è–∑–∞–Ω—ã –Ω–∞ `subscription_tier`:
  - `free` ‚Äî 30 —Å–æ–æ–±—â–µ–Ω–∏–π
  - `pro` ‚Äî 200 —Å–æ–æ–±—â–µ–Ω–∏–π
  - `vip` ‚Äî 1000 —Å–æ–æ–±—â–µ–Ω–∏–π

- –ê–¥–º–∏–Ω‚Äë–∫–æ–º–∞–Ω–¥–∞: `/set_tier user_id tier` (tier: `free` / `pro` / `vip`).

## –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä (Yandex Cloud / Ubuntu)

1. –°–∫–æ–ø–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä –≤ `/home/ubuntu/AIMedChatBot` (–∏–ª–∏ –¥—Ä—É–≥—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é).
2. –°–æ–∑–¥–∞–π –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π `venv`, —É—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, —Å–æ–∑–¥–∞–π `.env`.
3. –°–∫–æ–ø–∏—Ä—É–π `deploy/aimedbot.service` –≤ `/etc/systemd/system/aimedbot.service`
   –∏ –ø–æ–ø—Ä–∞–≤—å –ø—É—Ç–∏ / –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–¥ —Å–µ–±—è.
4. –ü—Ä–∏–º–µ–Ω—è–π —Å–µ—Ä–≤–∏—Å:

   ```bash
   sudo systemctl daemon-reload
   sudo systemctl enable aimedbot
   sudo systemctl start aimedbot
   sudo systemctl status aimedbot
   ```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –±–æ—Ç –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ systemd‚Äë—Å–µ—Ä–≤–∏—Å –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–Ω–∏–º–∞—Ç—å—Å—è
–ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞.
