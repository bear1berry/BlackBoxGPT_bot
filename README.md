# BlackBox GPT ‚Äî Universal AI Assistant

–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π, –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–π Telegram-–±–æ—Ç-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —á—É–≤—Å—Ç–≤—É–µ—Ç—Å—è –∫–∞–∫ –∂–∏–≤–æ–π —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫.  
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º—ã (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π, –º–µ–¥–∏—Ü–∏–Ω–∞, –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫, –±–∏–∑–Ω–µ—Å, –∫—Ä–µ–∞—Ç–∏–≤), –ø–æ–¥–ø–∏—Å–∫—É Premium, —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É –∏ —Ä–∞–±–æ—Ç—É —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ LLM-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ (DeepSeek + Perplexity), –∞ —Ç–∞–∫–∂–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ Yandex SpeechKit.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- –î–∏–∞–ª–æ–≥–æ–≤—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å –∞–¥–∞–ø—Ç–∞—Ü–∏–µ–π –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–±–∏–æ, —Å—Ç–∏–ª—å, —Ü–µ–ª–∏).
- –†–µ–∂–∏–º—ã:
  - üß† –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π
  - ü©∫ –ú–µ–¥–∏—Ü–∏–Ω–∞
  - üî• –ù–∞—Å—Ç–∞–≤–Ω–∏–∫
  - üíº –ë–∏–∑–Ω–µ—Å
  - üé® –ö—Ä–µ–∞—Ç–∏–≤
- –ü—Ä–æ—Ñ–∏–ª—å:
  - —Ö—Ä–∞–Ω–µ–Ω–∏–µ ¬´–æ —Å–µ–±–µ¬ª,
  - —Ñ–ª–∞–≥–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –º–æ—Ç–∏–≤–∞—Ü–∏–∏ –∏ –Ω–∞—É—á–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤,
  - —Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º –∏ —Å—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏.
- –ü–æ–¥–ø–∏—Å–∫–∞:
  - —É—Ä–æ–≤–Ω–∏ Free / Premium,
  - –ø–ª–∞–Ω—ã 1 / 3 / 12 –º–µ—Å—è—Ü–µ–≤,
  - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CryptoBot (USDT).
- –†–µ—Ñ–µ—Ä–∞–ª—ã:
  - –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞,
  - —É—á—ë—Ç —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –∏ –±–æ–Ω—É—Å–Ω—ã—Ö –¥–Ω–µ–π.
- LLM:
  - DeepSeek ‚Äî –≥–ª—É–±–æ–∫–∏–π —Ä–∞–∑–±–æ—Ä –∏ —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è,
  - Perplexity ‚Äî –∑–∞–ø—Ä–æ—Å—ã —Å –≤—ã—Ö–æ–¥–æ–º –≤ –≤–µ–±,
  - –±–∞–∑–æ–≤–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ (Perplexity ‚Üí DeepSeek).
- –ì–æ–ª–æ—Å:
  - —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ Yandex SpeechKit (STT).
- –•—Ä–∞–Ω–µ–Ω–∏–µ:
  - SQLite –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–µ–≥–∫–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –Ω–∞ PostgreSQL).
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
  - –≤ –∫–æ–Ω—Å–æ–ª—å –∏ –≤ —Ñ–∞–π–ª `logs/bot.log`.

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.10+
- SQLite (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏–ª–∏ PostgreSQL
- –ê–∫–∫–∞—É–Ω—Ç—ã –∏ –∫–ª—é—á–∏:
  - Telegram Bot API token
  - DeepSeek API key
  - Perplexity API key
  - fal.ai API key (–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–æ REST)
  - CryptoBot API token
  - Yandex SpeechKit API key

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

```bash
git clone <your-repo-url> AIMedChatBot
cd AIMedChatBot

python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

pip install -r requirements.txt
cp .env.example .env
nano .env  # –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω—ã / –∫–ª—é—á–∏ / URL
```

### –ú–∏–≥—Ä–∞—Ü–∏–∏

–ü—Ä–æ–µ–∫—Ç —É–∂–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ, –Ω–æ –ª—É—á—à–µ –ø—Ä–æ–≥–Ω–∞—Ç—å SQL-–º–∏–≥—Ä–∞—Ü–∏—é:

```bash
# –¥–ª—è SQLite:
sqlite3 bot.db < migrations/001_init.sql

# –¥–ª—è PostgreSQL, –ø—Ä–∏–º–µ—Ä:
# psql "$DATABASE_URL" -f migrations/001_init.sql
```

### –ó–∞–ø—É—Å–∫

```bash
source venv/bin/activate
python -m bot.main
```

–ë–æ—Ç –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –∏ –Ω–∞—á–∞—Ç—å polling.

---

## –î–µ–ø–ª–æ–π –Ω–∞ Ubuntu / Yandex Cloud

–ü—Ä–∏–º–µ—Ä –¥–ª—è Yandex Cloud VM (Ubuntu).

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
sudo apt update
sudo apt install -y python3.10 python3.10-venv git
```

### 2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
cd /home/ubuntu
git clone <your-repo-url> AIMedChatBot
cd AIMedChatBot

python3.10 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
cp .env.example .env
nano .env  # –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –∏ –∫–ª—é—á–∏
```

### 3. –ú–∏–≥—Ä–∞—Ü–∏–∏

```bash
# SQLite:
sqlite3 bot.db < migrations/001_init.sql

# Postgres (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å):
# psql "$DATABASE_URL" -f migrations/001_init.sql
```

### 4. Systemd-—Å–µ—Ä–≤–∏—Å

–°–∫–æ–ø–∏—Ä—É–π unit-—Ñ–∞–π–ª:

```bash
sudo cp aimedbot.service /etc/systemd/system/aimedbot.service
sudo nano /etc/systemd/system/aimedbot.service  # –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–ø—Ä–∞–≤—å –ø—É—Ç–∏/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

–£–±–µ–¥–∏—Å—å, —á—Ç–æ:

- `User` ‚Äî —ç—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –æ—Ç –∏–º–µ–Ω–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –±–æ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ubuntu`);
- `WorkingDirectory` ‚Äî –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É (`/home/ubuntu/AIMedChatBot`);
- `ExecStart` ‚Äî –ø—É—Ç—å –∫ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä—É venv (`/home/ubuntu/AIMedChatBot/venv/bin/python`).

### 5. –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º —Å–µ—Ä–≤–∏—Å

```bash
sudo systemctl daemon-reload
sudo systemctl enable aimedbot.service
sudo systemctl start aimedbot.service
```

–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:

```bash
sudo journalctl -u aimedbot.service -f
```

---

## –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∞

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Ç–∞–∫, —á—Ç–æ–±—ã:

- –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ä–µ–∂–∏–º—ã (—Å–º. `ModeEnum` + `prompt_builder.py`);
- —Ä–∞—Å—à–∏—Ä—è—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å LLM (—Å–º. `services/llm.py`);
- –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å SQLite ‚Üí PostgreSQL (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å `DATABASE_URL` –∏ –ø—Ä–æ–≥–Ω–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏);
- –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø–ª–∞—Ç—ë–∂–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (—Å–º. `services/payments_card.py`);
- —É—Å–ª–æ–∂–Ω—è—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (–º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å APScheduler –≤ `services/scheduler.py`).

–î–∞–ª—å—à–µ –º–æ–∂–Ω–æ:

- –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é HTTP-–æ–±–≤—è–∑–∫—É –ø–æ–¥ –≤–µ–±-—Ö—É–∫ CryptoBot;
- –≤–ø–∏—Å–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é fal.ai –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–æ –∑–∞–ø—Ä–æ—Å—É —Ä–µ–∂–∏–º–∞ ¬´–ö—Ä–µ–∞—Ç–∏–≤¬ª;
- —É–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏–∫—É –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö —Ä–∞—Å—Å—ã–ª–æ–∫ (–º–æ—Ç–∏–≤–∞—Ü–∏—è/–Ω–∞—É—á–Ω—ã–µ —Ñ–∞–∫—Ç—ã);
- —Ä–∞—Å—à–∏—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É ¬´—Å–∞–º–æ–æ–±—É—á–µ–Ω–∏—è¬ª –∑–∞ —Å—á—ë—Ç –∞–Ω–∞–ª–∏–∑–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

---

## –°—Ç–∏–ª—å –∏ UX

- –í—Å–µ —Ç–µ–∫—Å—Ç—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Äî –Ω–∞ —Ä—É—Å—Å–∫–æ–º, –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–π, —É–≤–µ—Ä–µ–Ω–Ω—ã–π —Ç–æ–Ω.
- –ù–∞–≤–∏–≥–∞—Ü–∏—è ‚Äî —á–µ—Ä–µ–∑ –Ω–∏–∂–Ω–∏–π —Ç–∞—Å–∫–±–∞—Ä (ReplyKeyboard), –±–µ–∑ –∏–Ω–ª–∞–π–Ω-–º–µ–Ω—é.
- –û—Ç–≤–µ—Ç—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É—é—Ç—Å—è —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏, –∞–±–∑–∞—Ü–∞–º–∏, —Å–ø–∏—Å–∫–∞–º–∏ –∏ —ç–º–æ–¥–∑–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
- –õ—ë–≥–∫–∞—è ¬´–ø–æ–ª–∏—Ä–æ–≤–∫–∞¬ª —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ `postprocess_text` –¥–ª—è —á–∏—Å—Ç–æ–≥–æ, –∞–∫–∫—É—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞.
